<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UME PET em Tons</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/selfie_segmentation.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>

  <!-- MediaPipe (mantém no head) -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/selfie_segmentation.js" crossorigin></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin></script>
</head>
<body>
  <main class="app">
    <header class="app-header">
      <h1>UME Prefeito Esmeraldo Tarquínio — Em Tons</h1>
      <p class="subtitle">Tire uma foto — detectamos o seu tom</p>
    </header>

    <section class="card camera-card">
      <div class="camera-top">
        <div class="preview-wrapper">
          <video id="cameraPreview" autoplay playsinline ></video>
          <canvas id="resultPreview" aria-hidden="true"></canvas>
          <div class="nose-indicator" id="noseIndicator" title="Alinhe a ponta do nariz aqui"></div>
        </div>

        <div class="color-info small">
          <div class="color-sample" id="colorSample"></div>
          <div class="color-meta">
            <div class="label">Tom detectado</div>
            <div class="code" id="colorCode">#------</div>
          </div>
        </div>
      </div>

      <div class="controls">
        <button id="captureBtn" class="btn primary"><i class="fas fa-camera"></i> Tirar Foto</button>
        <div class="action-row">
          <button id="retakeBtn" class="btn" style="display:none"><i class="fas fa-redo"></i> Tirar Outra</button>
          <button id="downloadBtn" class="btn success" style="display:none"><i class="fas fa-download"></i> Baixar</button>
          <button id="uploadGitHubBtn" class="btn github" style="display:none"><i class="fab fa-github"></i> Enviar</button>
		  <button id="goGalleryBtn" class="btn primary"><i class="fas fa-images"></i> Ver Cartela de Cores</button>
        </div>
      </div>

      <div id="loading" class="loading" aria-live="polite" style="display:none">
        <div class="spinner"></div>
        <div class="loading-text">Processando imagem...</div>
      </div>

      <div class="instructions">
        <h3>Como usar</h3>
        <ol>
          <li>Permita o acesso à câmera</li>
          <li>Centralize seu rosto e alinhe a ponta do nariz com o círculo</li>
          <li>Clique em "Tirar Foto"</li>
          <li>Baixe ou envie para o a cartela de cores do Projeto</li>
        </ol>
      </div>
    </section>

    <footer class="app-footer">
      <small>Projeto Cor de Quem? </b>
	  Biblioteca Escolar — UME Prefeito Esmeraldo Tarquínio</small>
    </footer>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin></script>
  <script src="script.js"></script>
</body>
</html>
